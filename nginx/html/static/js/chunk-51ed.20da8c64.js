(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-51ed"],{"0x3q":function(t,e,r){"use strict";var o=r("vidh");r.n(o).a},"30af":function(t,e,r){"use strict";var o=r("t3Un"),n=function(){return Object(o.a)({url:"/product/getCategory1",method:"get"})},a=function(t){return Object(o.a)({url:"/product/getCategory2/"+t,method:"get"})},i=function(t){return Object(o.a)({url:"/product/getCategory3/"+t,method:"get"})},l={data:function(){return{category1Id:null,category2Id:null,category3Id:null,categoryList1:[],categoryList2:[],categoryList3:[]}},created:function(){var t=this;n().then(function(e){t.categoryList1=e.data})},methods:{category1Changed:function(){var t=this;a(this.category1Id).then(function(e){t.category2Id=null,t.category3Id=null,t.categoryList2=e.data,t.$emit("listenOnSelect",t.category1Id,1)}),this.attrInfoList=null},category2Changed:function(){var t=this;i(this.category2Id).then(function(e){t.category3Id=null,t.categoryList3=e.data,t.$emit("listenOnSelect",t.category2Id,2)})},category3Changed:function(){this.$emit("listenOnSelect",this.category3Id,3)}}},c=r("KHd+"),s=Object(c.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"一级分类"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.category1Changed},model:{value:t.category1Id,callback:function(e){t.category1Id=e},expression:"category1Id"}},t._l(t.categoryList1,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"二级分类"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.category2Changed},model:{value:t.category2Id,callback:function(e){t.category2Id=e},expression:"category2Id"}},t._l(t.categoryList2,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),r("el-form-item",{attrs:{label:"三级分类"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.category3Changed},model:{value:t.category3Id,callback:function(e){t.category3Id=e},expression:"category3Id"}},t._l(t.categoryList3,function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)},[],!1,null,null,null);s.options.__file="CategorySelector.vue";e.a=s.exports},"N/F5":function(t,e,r){"use strict";var o=r("t3Un");e.a={getCategory1:function(){return Object(o.a)({url:"/product/getCategory1",method:"get"})},getCategory2:function(t){return Object(o.a)({url:"/product/getCategory2/"+t,method:"get"})},getCategory3:function(t){return Object(o.a)({url:"/product/getCategory3/"+t,method:"get"})},getTrademarkList:function(){return Object(o.a)({url:"/product/brand/getAllBrand",method:"get"})},getAttrInfoList:function(t,e,r){return Object(o.a)({url:"/product/getPlatformPropertyByCategoryId/"+t+"/"+e+"/"+r,method:"get"})},getAttrValueList:function(t){return Object(o.a)({url:"/product/getPropertyValueByPropertyKeyId/"+t,method:"get"})},saveAttrInfo:function(t){return Object(o.a)({url:"/product/savePlatformProperty",method:"post",data:t})}}},Zl38:function(t,e,r){"use strict";r.r(e);var o=r("N/F5"),n={components:{CategorySelector:r("30af").a},data:function(){return{category1Id:0,category2Id:0,category3Id:0,categoryId:0,categoryLevel:1,attrInfoList:null,attrInfoListLoading:!1,showAttrInfoForm:!1,attrValueListLoading:!1,attrInfoForm:{id:null,propertyKey:null,category1Id:0,category2Id:0,category3Id:0,propertyValueList:[]}}},methods:{getAttrInfoList:function(t,e){var r=this;this.categoryId=t,this.categoryLevel=e,1===e&&(this.category1Id=t,this.category2Id=0,this.category3Id=0),2===e&&(this.category2Id=t,this.category3Id=0),3===e&&(this.category3Id=t),this.attrInfoListLoading=!0,o.a.getAttrInfoList(this.category1Id,this.category2Id,this.category3Id).then(function(t){r.attrInfoList=t.data,r.attrInfoListLoading=!1})},addAttrInfo:function(){this.confirmSelect()&&(this.attrInfoForm.id=null,this.attrInfoForm.propertyKey=null,this.attrInfoForm.propertyValueList=[],this.showAttrInfoForm=!0)},confirmSelect:function(){return!!this.category1Id||(this.$alert("请选择分类","提示",{confirmButtonText:"确定",type:"warning"}),!1)},editAttrInfoById:function(t,e){var r=this;this.attrValueListLoading=!0,o.a.getAttrValueList(t).then(function(o){r.attrInfoForm.id=t,r.attrInfoForm.propertyKey=e,r.attrInfoForm.propertyValueList=o.data,r.attrValueListLoading=!1}),this.showAttrInfoForm=!0},deleteAttrValueByName:function(t){var e=[];this.attrInfoForm.propertyValueList.forEach(function(r){r.propertyValue!==t&&e.push(r)}),this.attrInfoForm.propertyValueList=e},saveAttrInfo:function(){var t=this;this.attrInfoForm.categoryId=this.categoryId,this.attrInfoForm.categoryLevel=this.categoryLevel,o.a.saveAttrInfo(this.attrInfoForm).then(function(e){t.getAttrInfoList(t.categoryId,t.categoryLevel),t.showAttrInfoForm=!1})},backToAttrList:function(){this.showAttrInfoForm=!1},addAttrValue:function(){this.attrInfoForm.propertyValueList.push({propertyValue:null,edit:!0})},saveAttrValue:function(t){t.edit=!1},editAttrValue:function(t){t.edit=!0}}},a=(r("0x3q"),r("KHd+")),i=Object(a.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("CategorySelector",{on:{listenOnSelect:t.getAttrInfoList}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAttrInfoForm,expression:"!showAttrInfoForm"}]},[r("div",{staticStyle:{"margin-bottom":"10px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){t.addAttrInfo()}}},[t._v("添加平台属性")])],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.attrInfoListLoading,expression:"attrInfoListLoading"}],attrs:{data:t.attrInfoList,"element-loading-text":"数据正在加载......",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.$index+1)+"\n        ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"属性id",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.id)+"\n        ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"属性名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.propertyKey))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.categoryLevel==e.row.categoryLevel?r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){t.editAttrInfoById(e.row.id,e.row.propertyKey)}}},[t._v("修改")]):t._e()]}}])})],1)],1),t._v(" "),r("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showAttrInfoForm,expression:"showAttrInfoForm"}],staticClass:"demo-form-inline",attrs:{model:t.attrInfoForm,inline:!0}},[r("el-form-item",{attrs:{label:"属性名称"}},[r("el-input",{model:{value:t.attrInfoForm.propertyKey,callback:function(e){t.$set(t.attrInfoForm,"propertyKey",e)},expression:"attrInfoForm.propertyKey"}})],1),t._v(" "),r("div",{staticStyle:{"margin-bottom":"10px"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(e){t.addAttrValue()}}},[t._v("添加属性值")])],1),t._v(" "),r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.attrValueListLoading,expression:"attrValueListLoading"}],attrs:{data:t.attrInfoForm.propertyValueList,"element-loading-text":"数据正在加载......",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.$index+1)+"\n          ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"属性值id",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.id)+"\n          ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"属性值名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?r("el-input",{staticClass:"edit-input",attrs:{size:"mini"},on:{blur:function(r){t.saveAttrValue(e.row)}},nativeOn:{keyup:function(r){if(!("button"in r)&&t._k(r.keyCode,"enter",13,r.key,"Enter"))return null;t.saveAttrValue(e.row)}},model:{value:e.row.propertyValue,callback:function(r){t.$set(e.row,"propertyValue",r)},expression:"scope.row.propertyValue"}}):r("span",{on:{click:function(r){t.editAttrValue(e.row)}}},[t._v(t._s(e.row.propertyValue))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-edit"},on:{click:function(r){t.deleteAttrValueByName(e.row.propertyValue)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),r("div",{staticStyle:{"margin-top":"22px"}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.saveAttrInfo()}}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(e){t.backToAttrList()}}},[t._v("返回")])],1)],1)],1)},[],!1,null,"f685b332",null);i.options.__file="list.vue";e.default=i.exports},t3Un:function(t,e,r){"use strict";var o=r("4d7F"),n=r.n(o),a=r("vDqi"),i=r.n(a).a.create({baseURL:"http://127.0.0.1:80",timeout:5e3});i.interceptors.response.use(function(t){return t.data},function(t){return console.log("err"+t),n.a.reject(t)}),e.a=i},vidh:function(t,e,r){}}]);